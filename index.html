<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chatbot Lyro - Fundaci√≥n Capac√≠tamente</title>

  <style>
    body { margin:0; padding:0; }

    #chat-toggle{
      position:fixed; bottom:20px; right:20px; padding:15px 20px;
      background:#1E90FF; color:#fff; border:none; border-radius:30px;
      cursor:pointer; z-index:10001; box-shadow:0 4px 12px rgba(0,0,0,.25);
      font-weight:bold; transition: transform .1s, filter .2s;
    }
    #chat-toggle:hover{ filter:brightness(.97); transform: translateY(-2px); }

    #whatsapp-toggle{
      position:fixed; bottom:20px; right:200px;
      width:56px; height:56px;
      background:#25D366; border-radius:50%;
      cursor:pointer; z-index:10001;
      box-shadow:0 4px 12px rgba(0,0,0,.25);
      text-decoration:none;
      display:inline-flex; align-items:center; justify-content:center;
      transition: transform .1s, filter .2s;
    }
    #whatsapp-toggle:hover{ filter:brightness(.97); transform: translateY(-2px); }

    .wa-icon{
      width:28px; height:28px;
      background-repeat:no-repeat;
      background-position:center;
      background-size:contain;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cpath fill='%23fff' d='M19.11 17.53c-.27-.13-1.6-.79-1.85-.88-.25-.09-.43-.13-.61.13-.18.27-.7.88-.86 1.06-.16.18-.32.2-.59.07-.27-.13-1.14-.42-2.17-1.34-.8-.71-1.34-1.59-1.5-1.86-.16-.27-.02-.41.12-.55.12-.12.27-.32.41-.48.14-.16.18-.27.27-.45.09-.18.04-.34-.02-.48-.07-.13-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47h-.52c-.18 0-.48.07-.73.34-.25.27-.95.93-.95 2.28 0 1.35.98 2.65 1.11 2.83.13.18 1.93 2.95 4.68 4.13.65.28 1.16.45 1.56.57.65.21 1.24.18 1.71.11.52-.08 1.6-.65 1.82-1.28.23-.63.23-1.17.16-1.28-.07-.11-.25-.18-.52-.32z'/%3E%3Cpath fill='%23fff' d='M26.66 5.34A14.9 14.9 0 0016.04.99C7.86.99 1.2 7.64 1.2 15.82c0 2.62.69 5.18 2 7.44L1.08 31l7.9-2.07a14.8 14.8 0 007.06 1.8h.01c8.18 0 14.84-6.65 14.84-14.83 0-3.96-1.55-7.69-4.23-10.56zM16.04 28.2h-.01a12.3 12.3 0 01-6.28-1.72l-.45-.27-4.69 1.23 1.25-4.57-.29-.47a12.3 12.3 0 01-1.89-6.58c0-6.79 5.52-12.31 12.32-12.31a12.24 12.24 0 018.72 3.62 12.25 12.25 0 013.6 8.69c0 6.79-5.52 12.31-12.28 12.38z'/%3E%3C/svg%3E");
    }

    #chat-container{
      position:fixed; bottom:80px; right:20px;
      width:360px; height:640px;
      max-width:92vw; max-height:88vh;
      background:#fff; border-radius:12px;
      box-shadow:0 8px 30px rgba(0,0,0,.3);
      z-index:10000; display:none; flex-direction:column; overflow:hidden;
      font-family:Arial, sans-serif;
    }

    #chat-header{
      background:#1E90FF; color:#fff; padding:10px 12px;
      font-weight:bold; font-size:1.02em;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }

    #chat-header .left, #chat-header .right{
      display:flex; align-items:center; gap:8px;
    }

    .header-btn{
      border:none; cursor:pointer;
      border-radius:10px;
      padding:8px 10px;
      background:rgba(255,255,255,.18);
      color:#fff; font-weight:700;
    }
    .header-btn:hover{ filter:brightness(.98); }

    #chat-title{
      font-weight:800;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width:210px;
    }

    #history-drawer{
      position:absolute;
      top:0; left:0; bottom:0;
      width:78%;
      background:#0f172a; color:#e5e7eb;
      z-index:10002;
      transform: translateX(-105%);
      transition: transform .18s ease;
      display:flex;
      flex-direction:column;
      border-right:1px solid rgba(255,255,255,.08);
    }
    #history-drawer.open{ transform: translateX(0); }

    #history-top{
      padding:12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.08);
      gap:10px;
    }
    #history-top b{ font-size:1.02em; }

    #history-list{
      overflow:auto;
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .day-sep{
      margin:10px 0 2px;
      font-size:.82em;
      opacity:.8;
    }

    .session-item {
      position: relative;
      text-align:left;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:#e5e7eb;
      border-radius:12px;
      padding:10px;
      cursor:pointer;
      display: block;
    }
    .session-item:hover { background:rgba(255,255,255,.10); }
    .session-item.active {
      border-color:rgba(59,130,246,.9);
      box-shadow:0 0 0 1px rgba(59,130,246,.45) inset;
    }

    .session-content-click { width: 85%; }

    .session-item .meta{
      font-size:.78em; opacity:.85;
      display:flex; gap:8px; align-items:center;
      margin-bottom:6px;
    }
    .pin-badge{
      font-size:.78em;
      background:rgba(255,255,255,.14);
      padding:2px 6px;
      border-radius:999px;
    }

    .session-item .preview{
      font-size:.9em;
      line-height:1.25;
      opacity:.95;
      word-break:break-word;
    }

    .history-more {
      position: absolute;
      top: 8px;
      right: 6px;
      width: 28px;
      height: 28px;
      border-radius: 6px;
      border: none;
      background: transparent;
      color: #94a3b8;
      cursor: pointer;
      font-size: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }
    .history-more:hover {
      background: rgba(255,255,255,0.15);
      color: #fff;
    }

    .history-menu {
      display: none;
      position: absolute;
      top: 38px;
      right: 8px;
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 8px;
      padding: 4px;
      min-width: 160px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
      z-index: 50;
    }
    .history-menu button {
      width: 100%;
      text-align: left;
      background: transparent;
      border: none;
      color: #cbd5e1;
      padding: 8px 10px;
      font-size: 13px;
      cursor: pointer;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .history-menu button:hover {
      background: #334155;
      color: #fff;
    }
    .history-menu .danger { color: #f87171; }
    .history-menu .danger:hover { background: rgba(248, 113, 113, 0.15); }

    #chat-messages{
      flex:1 1 auto;
      padding:10px;
      overflow-y:auto;
      background:#F4F7F9;
      display:flex;
      flex-direction:column;
    }

    .message{
      padding:8px 12px; margin-bottom:10px; border-radius:18px;
      max-width:80%; line-height:1.35; word-wrap:break-word;
      white-space:pre-wrap;
      position:relative;
    }
    .user{ background:#DCF8C6; align-self:flex-end; margin-left:auto; }
    .bot{ background:#fff; align-self:flex-start; margin-right:auto; border:1px solid #E0E0E0; }

    .time{
      display:block;
      font-size:.72em;
      opacity:.65;
      margin-top:4px;
    }

    #chat-footer{
      background:#fff;
      border-top:1px solid #eee;
      flex: 0 0 auto;
      display:flex;
      flex-direction:column;
    }

    #suggestion-buttons{
      padding:10px;
      background:#F4F7F9;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      border-bottom:1px solid #eee;

      max-height: 160px;
      overflow-y: auto;
      overscroll-behavior: contain;
      scrollbar-width: thin;
    }
    #suggestion-buttons::-webkit-scrollbar{ width: 10px; }
    #suggestion-buttons::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.18); border-radius: 999px; }
    #suggestion-buttons::-webkit-scrollbar-track{ background: transparent; }

    .suggestion{
      background:#fff; color:#1E90FF; border:1px solid #1E90FF;
      padding:8px 12px; border-radius:20px; cursor:pointer; font-size:.85em;
      transition: background-color .2s, color .2s;
      flex: 0 0 auto;
    }
    .suggestion:hover{ background:#1E90FF; color:#fff; }

    #chat-input-area{
      display:flex; padding:10px;
      background:#fff;
    }
    #chat-input{
      flex-grow:1; padding:10px;
      border:1px solid #E0E0E0; border-radius:20px;
      margin-right:8px; font-size:1em; outline:none;
    }
    #send-button{
      background:#1E90FF; color:#fff; border:none; border-radius:20px;
      padding:10px 15px; font-weight:bold; cursor:pointer;
    }
    #send-button:disabled{ opacity:.7; cursor:not-allowed; }
  </style>
</head>

<body>

  <button id="chat-toggle">ü§ñ Chatea con Lyro</button>

  <a id="whatsapp-toggle" href="https://wa.me/593991667561" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
    <span class="wa-icon" aria-hidden="true"></span>
  </a>

  <div id="chat-container">

    <div id="history-drawer">
      <div id="history-top">
        <b>üìö Historial</b>
        <button class="header-btn" id="history-close">‚úï</button>
      </div>
      <div id="history-list"></div>
    </div>

    <div id="chat-header">
      <div class="left">
        <button class="header-btn" id="history-open">‚ò∞</button>
        <div id="chat-title">Lyro-Capac√≠tamente</div>
      </div>
      <div class="right">
        <button class="header-btn" id="new-chat">Ôºã Nueva</button>
      </div>
    </div>

    <div id="chat-messages"></div>

    <div id="chat-footer">
      <div id="suggestion-buttons"></div>

      <div id="chat-input-area">
        <input type="text" id="chat-input" placeholder="Escribe tu pregunta...">
        <button id="send-button">Enviar</button>
      </div>
    </div>

  </div>

  <script>
    const SERVER_URL = "https://lyro-chatbot-capacitamente.onrender.com";

    const CLIENT_ID_KEY = "lyroClientId";
    let clientId = localStorage.getItem(CLIENT_ID_KEY);
    if (!clientId) {
      clientId = (crypto.randomUUID ? crypto.randomUUID() : ("cid-" + Date.now() + "-" + Math.random().toString(36).slice(2)));
      localStorage.setItem(CLIENT_ID_KEY, clientId);
    }

    const SESSION_KEY = "chatSessionId";
    let currentSessionId = localStorage.getItem(SESSION_KEY) || "";

    const toggleButton = document.getElementById("chat-toggle");
    const chatContainer = document.getElementById("chat-container");
    const sendButton = document.getElementById("send-button");
    const chatInput = document.getElementById("chat-input");
    const chatMessages = document.getElementById("chat-messages");
    const suggestionWrap = document.getElementById("suggestion-buttons");

    const historyDrawer = document.getElementById("history-drawer");
    const historyOpen = document.getElementById("history-open");
    const historyClose = document.getElementById("history-close");
    const historyList = document.getElementById("history-list");
    const newChatBtn = document.getElementById("new-chat");

    const DEFAULT_MENU_SUGGESTIONS = [
      { text: "1", label: "1) Cursos gratis" },
      { text: "2", label: "2) Cursos con certificados y precios" },
      { text: "3", label: "3) Contacto" },
      { text: "4", label: "4) Donar" },
      { text: "5", label: "5) Estado de certificado" },
      { text: "6", label: "6) Horarios" },
    ];

    function menuWelcomeText() {
      return `üëã Hola, soy LYRO-CAPAC√çTAMENTE ü§ñ

¬øEn qu√© te puedo ayudar?

üìå Elige una opci√≥n:

1) Cursos gratis
2) Cursos con certificados y precios
3) Contacto
4) Donar
5) Estado de certificado
6) Horarios

(Responde con 1-6 o escribe tu pregunta)`;
    }

    function fmtDate(d) {
      return new Date(d).toLocaleDateString("es-EC", { year:"numeric", month:"2-digit", day:"2-digit" });
    }
    function fmtTime(d) {
      return new Date(d).toLocaleTimeString("es-EC", { hour:"2-digit", minute:"2-digit" });
    }

    function clearMessages() { chatMessages.innerHTML = ""; }

    function addMessage(text, sender, createdAt = null) {
      const msg = document.createElement("div");
      msg.className = "message " + sender;

      const content = document.createElement("div");
      content.textContent = text;

      const time = document.createElement("span");
      time.className = "time";
      time.textContent = createdAt ? (fmtDate(createdAt) + " " + fmtTime(createdAt)) : (fmtTime(Date.now()));

      msg.appendChild(content);
      msg.appendChild(time);

      chatMessages.appendChild(msg);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function roleToSender(role) {
      const r = String(role || "").toLowerCase();
      if (r.includes("user") || r.includes("usuario")) return "user";
      return "bot";
    }

    function renderSuggestions(list) {
      const items = Array.isArray(list) && list.length ? list : DEFAULT_MENU_SUGGESTIONS;
      suggestionWrap.innerHTML = "";

      items.forEach(it => {
        const btn = document.createElement("button");
        btn.className = "suggestion";
        btn.type = "button";
        btn.textContent = it.label || it.text;
        btn.dataset.text = it.text;
        btn.addEventListener("click", () => sendMessage(btn.dataset.text));
        suggestionWrap.appendChild(btn);
      });

      suggestionWrap.scrollTop = 0;
    }

    // ‚úÖ apiFetch "amigable": NO lanza error por HTTP, solo por red.
    async function apiFetch(path, opts = {}) {
      const headers = Object.assign(
        { "Content-Type": "application/json", "x-client-id": clientId },
        (opts.headers || {})
      );

      let res;
      try {
        res = await fetch(SERVER_URL + path, { ...opts, headers });
      } catch (e) {
        // error de red real (offline, DNS, etc.)
        return { _httpOk: false, _httpStatus: 0, error: "Sin conexi√≥n", details: String(e?.message || e) };
      }

      const txt = await res.text();
      let json = null;
      try { json = JSON.parse(txt); } catch { json = null; }

      const out = json ?? {};
      out._httpOk = res.ok;
      out._httpStatus = res.status;
      if (!res.ok && !out.error && !out.reply) out.error = txt || ("HTTP " + res.status);

      return out;
    }

    // =====================
    // Historial
    // =====================
    async function loadSessionsList() {
      const data = await apiFetch("/sessions?limit=50", { method: "GET" });
      if (!data._httpOk) {
        historyList.innerHTML = "";
        const empty = document.createElement("div");
        empty.style.opacity = "0.8";
        empty.style.fontSize = "0.9em";
        empty.style.padding = "10px";
        empty.textContent = "No se pudo cargar el historial (Supabase no configurado o error).";
        historyList.appendChild(empty);
        return;
      }

      const sessions = data.sessions || [];
      historyList.innerHTML = "";

      if (sessions.length === 0) {
        const empty = document.createElement("div");
        empty.style.opacity = "0.8";
        empty.style.fontSize = "0.9em";
        empty.style.padding = "10px";
        empty.textContent = "A√∫n no hay conversaciones. Pulsa ‚ÄúNueva‚Äù.";
        historyList.appendChild(empty);
        return;
      }

      const hasNumbers = sessions.some(s => typeof s.conversation_number === "number");
      let fallbackMap = new Map();
      if (!hasNumbers) {
        const byCreated = [...sessions].sort((a,b) => new Date(a.created_at||0) - new Date(b.created_at||0));
        byCreated.forEach((s, i) => fallbackMap.set(s.session_id, i + 1));
      }

      const groups = {};
      for (const s of sessions) {
        const stamp = s.last_message_at || s.created_at || Date.now();
        const day = fmtDate(stamp);
        if (!groups[day]) groups[day] = [];
        groups[day].push(s);
      }

      const orderedDays = Object.keys(groups).sort((a,b) => {
        const pa = a.split("/").reverse().join("-");
        const pb = b.split("/").reverse().join("-");
        return pb.localeCompare(pa);
      });

      orderedDays.forEach(day => {
        const sep = document.createElement("div");
        sep.className = "day-sep";
        sep.textContent = "üìÖ " + day;
        historyList.appendChild(sep);

        groups[day].forEach(s => {
          const stamp = s.last_message_at || s.created_at || Date.now();

          const convNum = (typeof s.conversation_number === "number")
            ? s.conversation_number
            : (fallbackMap.get(s.session_id) || 1);

          const label = `Conversaci√≥n #${convNum}`;
          const pinned = !!s.pinned;

          const itemDiv = document.createElement("div");
          itemDiv.className = "session-item" + (s.session_id === currentSessionId ? " active" : "");
          itemDiv.dataset.session = s.session_id;
          itemDiv.dataset.pinned = pinned ? "1" : "0";

          const pinBadge = pinned ? `<span class="pin-badge">üìå Fijada</span>` : "";

          itemDiv.innerHTML = `
            <div class="session-content-click">
              <div class="meta">
                üïí ${fmtTime(stamp)}
                <span style="opacity:.7;">‚Ä¢</span>
                <span style="opacity:.95;">${label}</span>
                ${pinBadge}
              </div>
              <div class="preview">${(s.last_message_preview || "Conversaci√≥n nueva").replace(/</g,"&lt;")}</div>
            </div>

            <button class="history-more" type="button" title="Opciones">‚ãØ</button>

            <div class="history-menu">
              <button class="history-pin" type="button">${pinned ? "üìå Quitar pin" : "üìå Fijar"}</button>
              <button class="history-delete danger" type="button">üóëÔ∏è Eliminar</button>
            </div>
          `;

          historyList.appendChild(itemDiv);
        });
      });
    }

    document.addEventListener("click", (e) => {
      if (!e.target.closest(".session-item")) {
        document.querySelectorAll(".history-menu").forEach(m => m.style.display = "none");
      }
    });

    async function togglePin(sid, pinnedNow) {
      const r = await apiFetch(`/session/${encodeURIComponent(sid)}/pin`, {
        method: "POST",
        body: JSON.stringify({ pinned: !pinnedNow })
      });
      if (!r._httpOk) throw new Error(r.error || r.reply || "No se pudo fijar");
      await loadSessionsList();
    }

    historyList.addEventListener("click", async (e) => {
      const item = e.target.closest(".session-item");
      if (!item) return;

      const sid = item.getAttribute("data-session");
      const pinnedNow = item.dataset.pinned === "1";

      if (e.target.closest(".history-more")) {
        e.stopPropagation();
        document.querySelectorAll(".history-menu").forEach(m => m.style.display = "none");
        const menu = item.querySelector(".history-menu");
        const isOpen = menu.style.display === "block";
        menu.style.display = isOpen ? "none" : "block";
        return;
      }

      if (e.target.closest(".history-pin")) {
        e.stopPropagation();
        document.querySelectorAll(".history-menu").forEach(m => m.style.display = "none");
        try {
          await togglePin(sid, pinnedNow);
        } catch (err) {
          alert("Error fijando: " + err.message + "\n\nTip: agrega columnas pinned/pinned_at en Supabase.");
        }
        return;
      }

      if (e.target.closest(".history-delete")) {
        e.stopPropagation();
        document.querySelectorAll(".history-menu").forEach(m => m.style.display = "none");
        if (!confirm("¬øEliminar esta conversaci√≥n?")) return;

        const r = await apiFetch(`/session/${encodeURIComponent(sid)}`, { method: "DELETE" });
        if (!r._httpOk) {
          alert("Error eliminando: " + (r.error || r.reply || "No se pudo eliminar"));
          return;
        }

        item.remove();

        if (sid === currentSessionId) {
          currentSessionId = "";
          localStorage.removeItem(SESSION_KEY);
          clearMessages();
          addMessage("Conversaci√≥n eliminada. Pulsa ‚ÄúNueva‚Äù para crear otra.", "bot", new Date().toISOString());
        }
        await loadSessionsList();
        renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
        return;
      }

      if (!e.target.closest(".history-menu")) {
        currentSessionId = sid;
        localStorage.setItem(SESSION_KEY, currentSessionId);
        await loadHistory(currentSessionId);
        await loadSessionsList();
        historyDrawer.classList.remove("open");
      }
    });

    async function loadHistory(sessionId) {
      clearMessages();

      if (!sessionId) {
        const s = await apiFetch("/sessions", { method: "POST", body: JSON.stringify({ clientId }) });
        if (s._httpOk && s.sessionId) {
          currentSessionId = s.sessionId;
          localStorage.setItem(SESSION_KEY, currentSessionId);
        }
      }

      const data = await apiFetch(`/history/${encodeURIComponent(currentSessionId)}?limit=300`, { method: "GET" });

      if (!data._httpOk) {
        addMessage(menuWelcomeText(), "bot", new Date().toISOString());
        renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
        return;
      }

      const msgs = data.messages || [];
      if (msgs.length === 0) {
        addMessage(menuWelcomeText(), "bot", new Date().toISOString());
        renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
        return;
      }

      for (const m of msgs) {
        addMessage(m.content || "", roleToSender(m.role), m.created_at);
      }

      renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
    }

    async function newConversation() {
      const s = await apiFetch("/sessions", { method: "POST", body: JSON.stringify({ clientId }) });
      if (s._httpOk && s.sessionId) {
        currentSessionId = s.sessionId;
        localStorage.setItem(SESSION_KEY, currentSessionId);
      } else {
        currentSessionId = "";
        localStorage.removeItem(SESSION_KEY);
      }

      clearMessages();
      addMessage(menuWelcomeText(), "bot", new Date().toISOString());
      renderSuggestions(DEFAULT_MENU_SUGGESTIONS);

      try { await loadHistory(currentSessionId); } catch {}
      await loadSessionsList();
    }

    async function sendMessage(textFromButton = null) {
      const rawText = textFromButton ? String(textFromButton) : (chatInput.value || "").trim();
      if (!rawText) return;

      addMessage(rawText, "user", new Date().toISOString());
      chatInput.value = "";

      chatInput.disabled = true;
      sendButton.disabled = true;
      sendButton.textContent = "Cargando...";

      const data = await apiFetch("/chat", {
        method: "POST",
        body: JSON.stringify({ message: rawText, sessionId: currentSessionId, clientId })
      });

      // si vino session nueva
      if (data.sessionId && data.sessionId !== currentSessionId) {
        currentSessionId = data.sessionId;
        localStorage.setItem(SESSION_KEY, currentSessionId);
      }

      const replyText = data.reply || data.error || "Sin respuesta por ahora. Escribe MENU.";
      addMessage(replyText, "bot", new Date().toISOString());

      renderSuggestions(data.suggestions || DEFAULT_MENU_SUGGESTIONS);
      await loadSessionsList();

      chatInput.disabled = false;
      sendButton.disabled = false;
      sendButton.textContent = "Enviar";
      chatInput.focus();
    }

    toggleButton.onclick = async () => {
      const isVisible = chatContainer.style.display === "flex";
      chatContainer.style.display = isVisible ? "none" : "flex";

      if (!isVisible) {
        renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
        fetch(SERVER_URL + "/health").catch(()=>{});
        await loadSessionsList();
        await loadHistory(currentSessionId);
        setTimeout(() => chatInput.focus(), 120);
      }
    };

    sendButton.onclick = () => sendMessage();

    chatInput.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        sendMessage();
      }
    });

    historyOpen.onclick = () => historyDrawer.classList.add("open");
    historyClose.onclick = () => historyDrawer.classList.remove("open");
    newChatBtn.onclick = async () => { await newConversation(); };

    renderSuggestions(DEFAULT_MENU_SUGGESTIONS);
  </script>
</body>
</html>
